import{a as t,u as D}from"./useLegacyService.c9b3bbf8.js";import{aa as l,s as a,az as u,j as f}from"./entry.102678be.js";function c(){function s(e,i){return e.reduce((n,o)=>(n.push({...o,[i]:!0}),n),[])}return{setMetadataType:s}}const p=l("DimensionStore",{state:()=>({dimensions:[],treeDimensions:[],loading:!1}),actions:{async fetchDimensions(){this.loading=!0;const{dimensions:s,error:e}=await t().getDimensions();e||(this.dimensions=c().setMetadataType(s,"isDimension")),this.loading=!1},async fetchTreeDimensions(){this.loading=!0;const{treeDimensions:s,error:e}=await t().getDimensionsTree();e||(this.treeDimensions=c().setMetadataType(s,"isDimension")),this.loading=!1},async updateDimension(s){var n;const{dimension:e,error:i}=await t().putDimension(s);i?a((n=i.message)!=null?n:"DIMENSIONS.update_error"):u().updateItem({list:this.dimensions,value:s.id,item:{...e}})},async deleteDimension(s){var i;const{error:e}=await t().deleteDimension(s);if(!e)u().deleteItem({list:this.dimensions,value:s});else throw a((i=e.message)!=null?i:"DIMENSIONS.delete_error"),e},async addDimension(s){var m;const{merge:e}=f(),i={name:s,isNative:!1},n=e?D:t,{dimension:o,error:r}=await n().addDimension(i);if(r)throw a((m=r.message)!=null?m:"DIMENSIONS.create_error"),r;{const d={...o,isDimension:!0};return this.dimensions.push(d),Promise.resolve(d)}},getDimensionNameById(s){const e=this.dimensions.find(i=>i.id===s);return e?e.name:""},getAttributesByDimensionId(s){const e=this.dimensions.find(i=>i.id===s);return e?e.dimensionAttributeViews.filter(i=>!i.referencingMe):[]}}});export{c as a,p as u};
