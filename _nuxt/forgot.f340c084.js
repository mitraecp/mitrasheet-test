import{_ as D}from"./SendedMail.vue.fa6f974d.js";import{_ as H}from"./MButton.vue.eb72e6c7.js";/* empty css                    */import{_ as W}from"./ResendCode.vue.f133c41c.js";import J from"./MitraButton.1bc6f00c.js";import{f as K,r as l,h as Q,i as X,F as Y,j as _,b as f,e,u as t,k as C,l as s,w as u,m as p,t as k,p as S,q as I,R as A,s as E,v,x as Z,y as ee,z as te,o as x,A as oe,B as ae,a as se}from"./entry.102678be.js";import{r as ie}from"./useFormRules.a113b67d.js";import{_ as w}from"./brand_logo.4b36a3ff.js";import ne from"./ConfirmCode.b2d079fe.js";import"./regexp.6086e722.js";/* empty css                        */const y=r=>(ee("data-v-a39d57d5"),r=r(),te(),r),le={class:"flex items-center justify-center h-full bg-grey-50"},re={class:"flex flex-col items-center login-area"},ce={class:"auth-card mb-6 px-10 py-8 flex flex-col justify-center w-full"},me=y(()=>e("div",{class:"flex items-center justify-center"},[e("img",{src:w,alt:"mitra_logo"})],-1)),de={class:"text-center flex flex-col"},_e=y(()=>e("h2",{class:"text-grey font-semibold mb-6"},"Cheque seu e-mail",-1)),fe={class:"flex flex-col items-center my-2"},ue=y(()=>e("div",{class:"flex items-center justify-center"},[e("img",{src:w,alt:"mitra_logo"})],-1)),pe={class:"text-center flex flex-col pt-6"},ve={class:"text-grey-900 font-semibold text-3xl mb-6"},xe={class:"flex justify-center mt-2"},ye=K({__name:"forgot",setup(r){const a=l({email:""}),N=Q({email:[{...ie,message:X().$translate("LOGIN.please_insert_email")}]}),R=Y.useForm,{validate:L,validateInfos:O}=R(a,N),g=l(null),{confirmationEmail:m}=_(),d=l(!1),V=l(!1),n=l(!1);function $(){L().then(()=>{h(a.value)}).catch(()=>{E("LOGIN.fill_required_fields")})}async function B(o){var i;n.value=!0;try{const{error:c}=await S().validateResetPasswordCode({code:o.toString(),email:m});c?E((i=c.message)!=null?i:"AUTH.code_validation_error"):I(A.RESET_PASSWORD)}catch{}n.value=!1}function j(){var o;(o=g.value)==null||o.emitCode()}async function h(o){a.value.email=o.email.trim();try{n.value=!0,await S().sendResetPasswordConfirm({email:a.value.email}),_().setConfirmationEmail(a.value.email),d.value=!0}catch{}n.value=!1}function F(){_().setConfirmationEmail(),a.value.email="",d.value=!1}return(o,i)=>{const c=D,G=H,P=W,T=v("a-input"),q=v("a-form-item"),z=v("a-form"),M=J,U=Z;return x(),f("div",le,[e("div",re,[e("div",ce,[t(d)?(x(),f(C,{key:0},[me,e("div",de,[_e,s(c,{readonly:"",email:t(m)},null,8,["email"])]),s(ne,{ref_key:"codeInput",ref:g,disabled:t(n),"invalid-code":t(V),onValidate:B},null,8,["disabled","invalid-code"]),s(G,{"data-cy":"btn-submit",class:"capitalize my-2 h-11 btn-mockup--inverted",disabled:t(n),onClick:j},{default:u(()=>[p("Verificar")]),_:1},8,["disabled"]),e("div",fe,[s(P,{target:t(m),class:"my-1"},null,8,["target"]),e("h6",{class:"text-grey-300 font-normal"},[p(" Esse n\xE3o \xE9 seu email? "),e("b",{class:"font-medium ml-1 text-grey cursor-pointer",onClick:F},"Alterar endere\xE7o de email.")])])],64)):(x(),f(C,{key:1},[ue,e("div",pe,[e("div",ve,k(o.$t("LOGIN.forgot_password_2")),1)]),s(z,{model:t(a),name:"forgot_form","hide-required-mark":"",layout:"vertical",onFinish:h},{default:u(()=>[s(q,oe({name:"email",label:o.$t("GLOBAL.email"),class:"mb-3"},t(O).email),{default:u(()=>[s(T,{value:t(a).email,"onUpdate:value":i[0]||(i[0]=b=>t(a).email=b),placeholder:"Insira seu e-mail",class:"py-2.5"},null,8,["value"])]),_:1},16,["label"])]),_:1},8,["model"]),s(M,{text:"Login",color:"var(--violet-600)","fit-to-content":"",class:"login-button link mb-8",onClick:$})],64)),e("div",xe,[e("span",{class:"text-sm text-grey-500 font-medium flex cursor-pointer","data-cy":"btn-back",onClick:i[1]||(i[1]=b=>t(I)(t(A).LOGIN))},[s(U,{color:"var(--grey-500)",class:"mr-2",path:t(ae),type:"mdi",size:"20px"},null,8,["path"]),p(" "+k(o.$t("LOGIN.back_login_screen")),1)])])])])])}}});const Re=se(ye,[["__scopeId","data-v-a39d57d5"]]);export{Re as default};
