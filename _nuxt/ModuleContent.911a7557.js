import{f as V,aX as Q,al as X,r as E,H as K,i as _,au as Y,cA as Z,cB as ee,cC as te,av as oe,v as L,aF as se,o as t,b as s,u as a,k as $,M,C as D,e as r,N as j,c as P,ax as G,t as h,l as v,w as C,ar as W,cD as z,s as ae,x as ne,y as re,z as ie,a as le}from"./entry.102678be.js";import{_ as ce}from"./HeaderBar.vue.02da9777.js";import{u as pe}from"./legacy_store.afec42ea.js";import{u as de}from"./useHeadSettings.f1985dcc.js";import{c as ue}from"./useGoToScreen.2d5a4740.js";import{_ as me}from"./folder_open_blue.ee63f467.js";import{_ as _e}from"./layout_violet.70afa0aa.js";import{l as ve}from"./layout_black.3b56b7e5.js";import"./ProjectView.vue.c9650a78.js";import"./useLegacyService.c9b3bbf8.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";/* empty css                         *//* empty css                    *//* empty css                             */import"./MitraButton.1bc6f00c.js";import"./members_store.a95d955a.js";import"./dimension_store.1aca34b5.js";import"./dataset_store.f318df7c.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           */import"./useChartsSettings.971a22bb.js";import"./MitraIconButton.142ef623.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const ye=""+new URL("phone_green.faa3c1e4.svg",import.meta.url).href,R=c=>(re("data-v-6a17c845"),c=c(),ie(),c),fe={class:"overflow-auto shortHeight:max-h-[400px] pr-3"},he={key:0},Ce={key:0},ke=["onClick"],ge=R(()=>r("div",{class:"icon-wrapper"},[r("img",{src:me})],-1)),Oe={key:1,class:"text-grey-900"},Ee=R(()=>r("span",{class:"text-grey-400 hidden"},"Criado por Barts, editado h\xE1 2 dias",-1)),Re={class:"w-[169px]"},be={key:1},Be={key:1},we={key:0,class:""},Se=["onClick"],Te={class:"icon-wrapper"},Ne={key:0,src:ye,class:"icon-wrapper__mobile-icon"},xe={key:1,src:_e,class:"icon-wrapper__layout-icon"},Ae={key:1,class:"text-grey-900"},Le=R(()=>r("span",{class:"text-grey-400 hidden"},"Criado por Barts, editado h\xE1 2 dias",-1)),$e={class:"w-[169px]"},Me={key:1},De=V({__name:"ModuleContent",props:{modules:{type:Array,required:!1,default:()=>[]},workspaceId:{type:Number,required:!0},project:{type:Object,required:!0},readonlyProject:{type:Boolean,required:!1,default:!1}},setup(c){const y=c,F=Q(),u=pe();u.getDataFromQuery();const{screenList:p,selectedModule:k,moduleList:g}=X(u),d=E(-1),i=E("");function H(e){u.setSelectedModule(e),de().setHeadTitle(e.name)}function b({id:e}){ue(e)}function B(){d.value=-1,i.value=""}function w(e){d.value!==-1&&e.stopPropagation()}function f(e){const n=y.modules[e];if(!i.value||i.value===n.name)B();else{try{u.renameModule(y.modules[e].id,i.value,e)}catch{ae("TOAST.fail_to_rename_folder")}B()}}const S=K(()=>I.value.filter(e=>{var n;return((n=e.accessTypes)==null?void 0:n.includes(y.project.accessType))||e.divider})),I=E([{label:_().$translate("GLOBAL.open"),icon:ve,typeImg:!0,accessTypes:["CREATOR","BUSINESS","OWNER","NONE"],onClick:({contextIdx:e})=>U(e)},{divider:!0,class:"m-0"},{label:_().$translate("GLOBAL.rename"),icon:Y,disabled:y.readonlyProject,accessTypes:["CREATOR","OWNER"],onClick:({contextIdx:e})=>q(e)},{label:_().$translate("GLOBAL.duplicate"),icon:Z,accessTypes:["CREATOR","OWNER"],disabled:!0},{label:_().$translate("GLOBAL.move"),icon:ee,accessTypes:["CREATOR","OWNER"],disabled:!0},{label:_().$translate("GLOBAL.share"),icon:te,accessTypes:["CREATOR","OWNER","BUSINESS"],disabled:!0},{divider:!0,class:"m-0"},{label:_().$translate("GLOBAL.delete"),icon:oe,accessTypes:["CREATOR","OWNER"],disabled:y.readonlyProject,onClick:({contextIdx:e})=>J(e)}]);function U(e){k.value?b(p==null?void 0:p.value[e]):u.setSelectedModule(g.value[e])}function q(e){d.value=e,k.value?i.value=p.value[e].name:i.value=g.value[e].name}function J(e){u.deleteModuleRef=g.value[e],F.switchDialog("deleteFolderPanelController",!0)}return(e,n)=>{const O=L("a-input"),T=ne,N=ce,x=L("a-dropdown"),A=se("focus");return t(),s("div",fe,[a(k)?(t(),s("div",Be,[a(p).length?(t(),s("div",we,[(t(!0),s($,null,M(a(p),(m,o)=>(t(),s("div",{key:`project-content-${o}`,class:D(["card-wrapper",{"!mt-0":o===0,"!mb-0":o===a(p).length-1}])},[r("div",{class:"card",onClick:l=>a(d)===-1&&b(m)},[r("div",Te,[m.isMobile?(t(),s("img",Ne)):(t(),s("img",xe))]),r("div",{class:"flex flex-col",onClick:w},[a(d)===o?j((t(),P(O,{key:0,ref_for:!0,ref:"input",value:a(i),"onUpdate:value":n[2]||(n[2]=l=>G(i)?i.value=l:null),"data-cy":"input-name",class:"mr-4",onBlur:l=>f(o),onEnter:l=>f(o)},null,8,["value","onBlur","onEnter"])),[[A]]):(t(),s("h6",Ae,h(m.name),1)),Le]),v(x,{trigger:"click","destroy-popup-on-hide":"","overlay-class-name":"py-2 px-3 mitra-popover-wrapper"},{overlay:C(()=>[r("div",$e,[v(N,{options:a(S),"context-idx":o},null,8,["options","context-idx"])])]),default:C(()=>[r("div",{class:"icon-button icon-more",onClick:n[3]||(n[3]=W(()=>{},["stop"]))},[v(T,{size:"15px",type:"mdi",color:"var(--grey-900)",path:a(z)},null,8,["path"])])]),_:2},1024)],8,Se)],2))),128))])):(t(),s("div",Me,h(e.$t("PROJECT.do_not_have_screen_yet")),1))])):(t(),s("div",he,[c.modules.length?(t(),s("div",Ce,[(t(!0),s($,null,M(c.modules,(m,o)=>(t(),s("div",{key:`project-content-${o}`,class:D(["card-wrapper",{"!mt-0":o===0,"!mb-0":o===c.modules.length-1}])},[r("div",{class:"card",onClick:l=>a(d)===-1&&H(m)},[ge,r("div",{class:"flex flex-col",onClick:w},[a(d)===o?j((t(),P(O,{key:0,ref_for:!0,ref:"input",value:a(i),"onUpdate:value":n[0]||(n[0]=l=>G(i)?i.value=l:null),"data-cy":"input-name",class:"mr-4",onBlur:l=>f(o),onEnter:l=>f(o)},null,8,["value","onBlur","onEnter"])),[[A]]):(t(),s("h6",Oe,h(m.name),1)),Ee]),v(x,{trigger:"click","destroy-popup-on-hide":"","overlay-class-name":"py-2 px-3 mitra-popover-wrapper"},{overlay:C(()=>[r("div",Re,[v(N,{options:a(S),"context-idx":o},null,8,["options","context-idx"])])]),default:C(()=>[r("div",{class:"icon-button icon-more",onClick:n[1]||(n[1]=W(()=>{},["stop"]))},[v(T,{size:"15px",type:"mdi",color:"var(--grey-900)",path:a(z)},null,8,["path"])])]),_:2},1024)],8,ke)],2))),128))])):(t(),s("div",be,h(e.$t("PROJECT.do_not_have_modules_yet")),1))]))])}}}),mt=le(De,[["__scopeId","data-v-6a17c845"]]);export{mt as default};
