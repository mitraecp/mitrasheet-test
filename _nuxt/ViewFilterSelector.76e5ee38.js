import{f as W,r as p,H as F,v as X,o as i,b as m,l as u,w as b,u as n,dU as Y,e as d,t as C,aE as $,ax as z,k as D,M as V,C as B,c as A,ag as H,J as N,x as Z,a as ee}from"./entry.102678be.js";import te from"./BaseContentHeader.0262d7f9.js";import{_ as oe}from"./BaseContentFooter.vue.20fdc5e7.js";import{u as se}from"./useChartsSettings.971a22bb.js";import{u as ne}from"./dimension_store.1aca34b5.js";import{a as ae}from"./useLegacyService.c9b3bbf8.js";import"./ProjectView.vue.c9650a78.js";import"./MitraIconButton.142ef623.js";import"./MitraButton.1bc6f00c.js";/* empty css                         *//* empty css                    *//* empty css                             */import"./legacy_store.afec42ea.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./HeaderBar.vue.02da9777.js";import"./members_store.a95d955a.js";import"./dataset_store.f318df7c.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           *//* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const le={key:0,class:"flex flex-col"},ie={class:"mt-4 mb-3 text-grey-500 text-sm"},re={class:"container !p-4 !pb-0 h-[240px] max-h-[240px]"},ce=["title","onClick"],pe={key:1},de={class:"container h-[245px] overflow-y-auto"},me=["title"],ue={class:"check-box"},ve=["title","onClick"],fe={class:"check-box"},_e=W({__name:"ViewFilterSelector",props:{chip:null},emits:["cancel","submit"],setup(M,{expose:O,emit:k}){const E=M,L=se(),w=p(),r=p({}),h=p(""),x=p(""),v=p(!1),T=p(!1),a=p({id:0,name:""}),U=ne(),G=ae(),I=p();g();const J=F(()=>{var e;return(e=I.value)==null?void 0:e.filter(t=>{var o;return(o=t.name)==null?void 0:o.toLowerCase().includes(h.value.toLowerCase())}).slice(0,1e3)}),K=F(()=>U.dimensions.filter(e=>e.name.toLowerCase().includes(x.value.toLowerCase())));function R(){const e={list:r.value[a.value.id],dimension:a.value};k("submit",e)}async function S(e){var o,l;a.value=e;const{dimensionDataView:t}=await G.getDimensionContent(e.id,{},!0);w.value=(o=t==null?void 0:t.contents)==null?void 0:o.map(c=>({name:c.dimensionContentAttributesView[0],internalId:c.internalId})),(l=w.value)==null||l.push({name:"(Vazio)",internalId:-999}),j()}function j(){var e;I.value=(e=w.value)==null?void 0:e.map(t=>{var o,l;return{...t,selected:(l=(o=r.value)==null?void 0:o[a.value.id])==null?void 0:l[t.internalId]}})}function q(){var e;v.value=!v.value,(e=I.value)==null||e.forEach(t=>t.selected=v.value),T.value=v.value}function g(){var e,t,o,l,c;(c=typeof E.chip=="number"?(o=(t=(e=L.viewForm.viewMeasureForm)==null?void 0:e[E.chip].chips)==null?void 0:t[0].chipFilterForm)==null?void 0:o.filterItems:(l=L.viewForm.viewFilterForm)==null?void 0:l.filterItems)==null||c.forEach(f=>{r.value[f.dimensionId]={},f.internalIds.forEach(y=>r.value[f.dimensionId][y]=!0)})}function P(e){e.selected=!e.selected,e.selected?(r.value[a.value.id]||(r.value[a.value.id]={}),r.value[a.value.id][e.internalId]=e.selected):delete r.value[a.value.id][e.internalId]}return O({applyCache:g,setData:S}),(e,t)=>{var y;const o=Z,l=te,c=X("a-input"),f=oe;return i(),m("div",null,[u(l,{"title-class":n(a).id?"text-grey-500 text-xs font-normal":"",title:n(a).id?n(a).name:e.$t("SHEET.add_filter"),onCancel:t[0]||(t[0]=s=>k("cancel"))},{preffix:b(()=>[u(o,{class:"mr-2",size:"20",color:"grey",type:"mdi",path:n(Y)},null,8,["path"])]),_:1},8,["title-class","title"]),n(a).id?(i(),m("div",pe,[u(c,{value:n(h),"onUpdate:value":t[2]||(t[2]=s=>z(h)?h.value=s:null),class:"h-[44px] mx-0 my-3",type:"text",placeholder:e.$t("GLOBAL.search")},{prefix:b(()=>[u(o,{size:"16",color:"grey",type:"mdi",path:n($)},null,8,["path"])]),_:1},8,["value","placeholder"]),d("div",de,[d("div",{class:B(["dropdown-list-item flex items-center",{active:n(v)}]),title:e.$t("SHEET.select_all_2"),onClick:q},[d("div",ue,[n(v)?(i(),A(o,{key:0,size:"12",color:"var(--violet-600)",type:"mdi",path:n(H)},null,8,["path"])):N("",!0)]),d("span",null,C(e.$t("SHEET.select_all_2")),1)],10,me),(i(!0),m(D,null,V((y=n(J))==null?void 0:y.sort((s,_)=>s.name==="(Vazio)"?-1:_.name==="(Vazio)"?1:0),(s,_)=>(i(),m("div",{key:_,class:B(["dropdown-list-item flex items-center",{active:s.selected}]),title:s.name,onClick:Q=>P(s)},[d("div",fe,[s.selected?(i(),A(o,{key:0,size:"12",color:"var(--violet-600)",type:"mdi",path:n(H)},null,8,["path"])):N("",!0)]),d("span",null,C(s.name),1)],10,ve))),128))]),u(f,{"container-class":"!pt-1","confirm-text":"OK",divider:!1,onConfirm:R,onCancel:t[3]||(t[3]=s=>k("cancel"))})])):(i(),m("div",le,[d("span",ie,C(e.$t("DIMENSIONS.attributes.select_dimension"))+": ",1),d("div",re,[u(c,{value:n(x),"onUpdate:value":t[1]||(t[1]=s=>z(x)?x.value=s:null),class:"h-[44px] mb-1",type:"text",placeholder:e.$t("GLOBAL.search")},{prefix:b(()=>[u(o,{size:"16",color:"grey",type:"mdi",path:n($)},null,8,["path"])]),_:1},8,["value","placeholder"]),(i(!0),m(D,null,V(n(K),(s,_)=>(i(),m("div",{key:_,class:"dropdown-list-item !text-base",title:s.name,onClick:Q=>S(s)},C(s.name),9,ce))),128))])]))])}}}),Ke=ee(_e,[["__scopeId","data-v-3615fc35"]]);export{Ke as default};
