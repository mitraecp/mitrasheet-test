import O from"./MetadataAddButton.41902bb4.js";import R from"./DroppableWrapper.e14af8ec.js";import L from"./SheetToDBAddRegister_.be23964f.js";import{f as N,r as f,dK as Y,v as z,o as x,b as y,e as _,l as n,w as v,u as o,n as V,g as q,ax as w,k as T,M,ap as U,t as E,ah as P,ar as j,s as A,x as H,y as J,z as K,a as W}from"./entry.102678be.js";import{u as X}from"./useChartsSettings.971a22bb.js";import"./ProjectView.vue.c9650a78.js";import"./AddDimensionAutocomplete.4607c47e.js";import"./dimension_store.1aca34b5.js";import"./useLegacyService.c9b3bbf8.js";import"./AddAttributesOfDimensionAutocomplete.0057a0b5.js";import"./useDataTypeIcons.d26d6eae.js";import"./MButton.vue.eb72e6c7.js";/* empty css                    *//* empty css                         *//* empty css                             */import"./MitraButton.1bc6f00c.js";import"./legacy_store.afec42ea.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./HeaderBar.vue.02da9777.js";import"./members_store.a95d955a.js";import"./dataset_store.f318df7c.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           */import"./MitraIconButton.142ef623.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const Z=l=>(J("data-v-9021668f"),l=l(),K(),l),G={class:"flex flex-col container"},Q=["onClick"],ee={class:"flex items-center w-full justify-between"},te={class:"ml-1 truncate"},oe=Z(()=>_("div",{class:"mb-4"},null,-1)),ne=N({__name:"SheetToDBRegister_",emits:["trigger-update-view","set-header-and-content-of-range","set-dynamic-selection-by-range"],setup(l,{emit:d}){const g=X(),r=f(),a=f(!1),b=Y(),c=f(),C=i=>{a.value=!0,c.value=i};function I(i){b.removeSheetToDBDimensionFormByIndex(i)}const D=f(!1),k=()=>{D.value=!0};function F(){D.value=!1}const $=i=>{var u,p;const e=JSON.parse(i.dataTransfer.getData("value")).data;if(!g.verifyIfDataIsUniqueInAxisYAndAxisX((u=e.dimensionId)!=null?u:e.id)){A("TOAST.unable_add_same_dimension");return}if("dimensionId"in e||e.isDimension){const s=(p=e.dimensionId)!=null?p:e.id;g.setAxisY(s),d("trigger-update-view")}else if("dimensionAttributeType"in e)if(e.dimensionAttributeType!=="Number"){const s=e.referencedDimensionId;g.setAxisY(s),d("trigger-update-view")}else A("warning",`Dado tipo ${e.dimensionAttributeType} s\xF3 pode ser adicionado como m\xE9trica`)};return(i,e)=>{const S=O,u=R,p=L,s=z("a-popover"),B=H;return x(),y(T,null,[_("div",G,[n(u,V(q({onDragOver:k,onDragLeave:F,onDrop:$})),{default:v(()=>[n(S,{hover:o(D),onClick:e[0]||(e[0]=t=>r.value=!0)},null,8,["hover"])]),_:1},16),n(s,{visible:o(r),"onUpdate:visible":e[4]||(e[4]=t=>w(r)?r.value=t:null),"overlay-class-name":"w-[350px]",placement:"topLeft",trigger:"click","arrow-point-at-center":"","destroy-popup-on-hide":""},{content:v(()=>[n(p,{onSetHeaderAndContentOfRange:e[1]||(e[1]=t=>d("set-header-and-content-of-range",t)),onSetDynamicSelectionByRange:e[2]||(e[2]=t=>d("set-dynamic-selection-by-range",t)),onCancel:e[3]||(e[3]=t=>r.value=!1)})]),_:1},8,["visible"])]),n(s,{visible:o(a),"onUpdate:visible":e[6]||(e[6]=t=>w(a)?a.value=t:null),"overlay-class-name":"w-[350px]",placement:"topLeft",trigger:"click","arrow-point-at-center":""},{content:v(()=>{var t,m;return[n(p,{"selected-dimension-by-prop":o(c),"content-range":(t=o(c))==null?void 0:t.range,"attributes-form":(m=o(c))==null?void 0:m.sheetToDBDimensionAttributesForm,onCancel:e[5]||(e[5]=h=>a.value=!1)},null,8,["selected-dimension-by-prop","content-range","attributes-form"])]}),default:v(()=>[(x(!0),y(T,null,M(o(b).sheetToDBForm.sheetToDBDimensionForm,(t,m)=>(x(),y("div",{key:m,"data-cy":"dataset-attribute",class:"text-of-dimension flex items-center cursor-pointer rounded-md mb-1",onClick:h=>C(t)},[n(B,{class:"ml-2",color:"#875BF7",path:o(U),type:"mdi",size:"18"},null,8,["path"]),_("div",ee,[_("span",te,E(t.name),1),n(B,{class:"mr-2 cursor-pointer transition-all duration-300 ease-in-out hover:opacity-100",color:"#c7cbdd",opacity:"0.5",path:o(P),type:"mdi",size:"15",onClick:j(h=>I(m),["stop"])},null,8,["path","onClick"])])],8,Q))),128))]),_:1},8,["visible"]),oe],64)}}}),Ne=W(ne,[["__scopeId","data-v-9021668f"]]);export{Ne as default};
