import{_ as q}from"./DisplayPasswordButton.vue.cf942e8c.js";import A from"./PasswordStrength.b6dd77e9.js";import{_ as L}from"./MButton.vue.eb72e6c7.js";/* empty css                    */import{f as U,r as i,j as V,b as p,e as a,u as s,k as z,l as t,w as n,m as l,p as I,s as $,v as _,x as j,o as v,q as b,R as P,B as E}from"./entry.102678be.js";import{u as O}from"./usePasswordRules.c7f79ae8.js";import{r as k,e as D}from"./useFormRules.a113b67d.js";import{_ as F}from"./logo_default.e9f251c1.js";/* empty css                             */import"./regexp.6086e722.js";const G={class:"flex items-center justify-center h-full bg-grey-50"},H={class:"flex flex-col items-center login-area"},M=a("img",{src:F,class:"mb-6",alt:"mitra_logo"},null,-1),W={class:"auth-card mb-6 p-10 flex flex-col w-full"},J=a("div",{class:"text-center"},[a("h2",{class:"text-grey font-semibold mb-6"},"Redefina sua senha"),a("h6",{class:"text-grey-300 mb-3"},[l(" Sua senha deve ser diferente das senhas "),a("br"),l(" utilizadas anteriormente. ")])],-1),K={class:"flex justify-center mt-2"},Q={key:1,class:"text-center"},X=a("h2",{class:"text-grey font-semibold mb-6"}," Sua senha foi redefinida com sucesso! ",-1),Y=a("h6",{class:"text-grey-300 mb-3"}," Clique no botao a baixo para acessar sua conta. ",-1),ds=U({__name:"password-reset",setup(Z){const r=i({password:"",confirmPassword:""}),d=i(!1),w=i(!1),u=i(!1),{confirmationEmail:S}=V(),m=i(["password","password"]),{passwordRules:C,passwordStrengthRef:c}=O();async function R(){var f;if(c.value&&(c.value.displayWrongValues=!u.value),!!u.value){try{d.value=!0;const{error:e}=await I().resetPassword({newPassword:r.value.confirmPassword,email:S});e?$((f=e.message)!=null?f:"AUTH.reset_password_error"):w.value=!0}catch{}d.value=!1}}return(f,e)=>{const y=q,g=_("a-input"),h=_("a-form-item"),B=A,x=L,N=_("a-form"),T=j;return v(),p("div",G,[a("div",H,[M,a("div",W,[s(w)?(v(),p("div",Q,[X,Y,t(x,{"data-cy":"btn-login",class:"capitalize login-button my-2","html-type":"submit",onClick:e[6]||(e[6]=o=>s(b)(s(P).LOGIN))},{default:n(()=>[l("Login")]),_:1})])):(v(),p(z,{key:0},[J,t(N,{model:s(r),name:"pwd_reset_form",class:"mb-3","hide-required-mark":"",layout:"vertical",onFinish:R},{default:n(()=>[t(h,{name:"password",label:"Senha",class:"my-2",rules:[{...s(k),message:"Por favor, insira sua senha!"}]},{default:n(()=>[t(g,{value:s(r).password,"onUpdate:value":e[1]||(e[1]=o=>s(r).password=o),placeholder:"Insira sua senha",type:s(m)[0]},{suffix:n(()=>[t(y,{onChange:e[0]||(e[0]=o=>s(m)[0]=o)})]),_:1},8,["value","type"])]),_:1},8,["rules"]),t(B,{ref_key:"passwordStrengthRef",ref:c,password:s(r).password,rules:s(C),onUpdate:e[2]||(e[2]=o=>u.value=o)},null,8,["password","rules"]),t(h,{name:"confirmPassword",class:"my-2",label:"Digite sua senha novamente",rules:[{...s(k),message:"Por favor, confirme a senha!"},{validator:()=>s(D)(s(r).password,s(r).confirmPassword)}]},{default:n(()=>[t(g,{value:s(r).confirmPassword,"onUpdate:value":e[4]||(e[4]=o=>s(r).confirmPassword=o),placeholder:"Insira sua senha",type:s(m)[1]},{suffix:n(()=>[t(y,{onChange:e[3]||(e[3]=o=>s(m)[1]=o)})]),_:1},8,["value","type"])]),_:1},8,["rules"]),a("div",null,[t(x,{"data-cy":"btn-submit",class:"capitalize login-button my-2","html-type":"submit",loading:s(d)},{default:n(()=>[l("Redefinir")]),_:1},8,["loading"])])]),_:1},8,["model"]),a("div",K,[a("span",{class:"text-sm text-grey-300 flex cursor-pointer","data-cy":"btn-back",onClick:e[5]||(e[5]=o=>s(b)(s(P).LOGIN))},[t(T,{color:"#929292",class:"mr-2",path:s(E),type:"mdi",size:"20px"},null,8,["path"]),l(" Voltar para o Login")])])],64))])])])}}});export{ds as default};
