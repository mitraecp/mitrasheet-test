import B from"./MetadataAddButton.41902bb4.js";import C from"./DroppableWrapper.e14af8ec.js";import $ from"./ViewDimensionSelector.7211b5bd.js";import{_ as k}from"./MetadataButton.vue.350ca6ce.js";import{u as N}from"./dimension_store.1aca34b5.js";import{f as V,r as f,v as h,o as c,b as _,e as x,t as q,l as m,w as g,u as l,n as F,g as O,ax as L,k as M,M as R,c as z,ap as P,ar as U,s as v}from"./entry.102678be.js";import{u as W}from"./useChartsSettings.971a22bb.js";const X={class:"flex flex-col"},H={class:"label-title"},J={class:"flex flex-col container"},ne=V({__name:"ViewYAxis",props:{tableType:{type:String,default:"dimension"},viewTitle:{type:String,default:"Linhas"}},emits:["trigger-update-view"],setup(w,{emit:p}){const D=w,o=W(),{getDimensionNameById:y}=N(),i=f();function b(t){var n;if(!(((n=o.viewForm.axisY)==null?void 0:n.every(s=>s!==t.id))&&t.id!==o.viewForm.axisX)){v("N\xE3o \xE9 poss\xEDvel adicionar a mesma dimens\xE3o");return}const u=t.id;o.setAxisY(u),p("trigger-update-view"),i.value=!1}const d=f(!1),A=()=>{d.value=!0};function S(){d.value=!1}const T=t=>{var n,s;const e=JSON.parse(t.dataTransfer.getData("value")).data;if(!o.verifyIfDataIsUniqueInAxisYAndAxisX((n=e.dimensionId)!=null?n:e.id)){v("TOAST.unable_add_same_dimension");return}if("dimensionId"in e||e.isDimension){const r=(s=e.dimensionId)!=null?s:e.id;o.setAxisY(r),p("trigger-update-view")}else if("dimensionAttributeType"in e)if(e.dimensionAttributeType!=="Number"){const r=e.referencedDimensionId;o.setAxisY(r),p("trigger-update-view")}else v("warning",`Dado tipo ${e.dimensionAttributeType} s\xF3 pode ser adicionado como m\xE9trica`)};function Y(t){o.removeAxisY(t),p("trigger-update-view")}return(t,e)=>{const u=B,n=C,s=$,r=h("a-popover"),E=k;return c(),_("div",X,[x("p",H,q(D.viewTitle),1),x("div",J,[m(n,F(O({onDragOver:A,onDragLeave:S,onDrop:T})),{default:g(()=>[m(u,{hover:l(d),onClick:e[0]||(e[0]=a=>i.value=!0)},null,8,["hover"])]),_:1},16),m(r,{visible:l(i),"onUpdate:visible":e[2]||(e[2]=a=>L(i)?i.value=a:null),"overlay-class-name":"w-[400px]",placement:"bottomRight",trigger:"click","destroy-popup-on-hide":"","arrow-point-at-center":""},{content:g(()=>[m(s,{ref:"filterSelector",chip:0,title:t.$t("SHEET.VIEW.add_lines"),onCancel:e[1]||(e[1]=a=>i.value=!1),onSubmit:b},null,8,["title"])]),_:1},8,["visible"])]),(c(!0),_(M,null,R(l(o).viewForm.axisY,(a,I)=>(c(),z(E,{key:`dimension-chip-${I}`,text:l(y)(a),icon:l(P),onClose:Z=>Y(a),onContextmenu:e[3]||(e[3]=U(()=>{},["prevent","stop"]))},null,8,["text","icon","onClose"]))),128))])}}});export{ne as _};
