import{f as I,r as u,H as B,v as b,o as p,c as L,w as y,e as n,b as c,M as N,l as d,u as t,aK as S,t as v,k as T,ay as A,J as D,ax as x,at as C,x as M,a as H}from"./entry.102678be.js";import{u as K}from"./dataset_store.f318df7c.js";import"./ProjectView.vue.c9650a78.js";import"./useLegacyService.c9b3bbf8.js";import"./dimension_store.1aca34b5.js";/* empty css                         *//* empty css                    *//* empty css                             */import"./MitraButton.1bc6f00c.js";import"./legacy_store.afec42ea.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./HeaderBar.vue.02da9777.js";import"./members_store.a95d955a.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           */import"./useChartsSettings.971a22bb.js";import"./MitraIconButton.142ef623.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const V={class:"flex cursor-pointer chip"},z={class:"search-input w-full"},F={class:"container"},U={class:"container-list"},J=["title","onClick"],O={class:"flex items-center"},P={class:"flex items-center"},R={class:"font-bold font-[#0E1428]"},j=I({__name:"AddCubeAutocomplete",emits:["selected-metric"],setup(q,{emit:g}){const l=u(!1),r=u(""),k=K(),f=u({name:"",datasetId:null,metricId:null,metricType:"Number"}),a=B(()=>k.getAllMetricsOfAllDatasets.filter(s=>s.name.toLowerCase().includes(r.value.toLowerCase())&&s.name!==f.value.name));function m(s){f.value=s,l.value=!1,r.value=s.name,g("selected-metric",s)}function h(){setTimeout(()=>{l.value=!1},200)}return(s,e)=>{const w=b("a-input"),_=M,E=b("a-popover");return p(),L(E,{visible:t(l),"onUpdate:visible":e[6]||(e[6]=o=>x(l)?l.value=o:null),trigger:"focus",placement:"bottomLeft","destroy-popup-on-hide":"",class:"popover-list"},{content:y(()=>{var o;return[n("div",F,[n("div",U,[(p(!0),c(T,null,N(t(a),(i,$)=>(p(),c("div",{key:$,class:"cursor-pointer select-none item",title:i.name,onClick:G=>m(i)},[n("div",O,[d(_,{size:"20",color:"var(--grey-700)",type:"mdi",path:t(S)},null,8,["path"])]),n("span",null,v(i.name),1)],8,J))),128)),(o=t(a))!=null&&o.length?D("",!0):(p(),c("div",{key:0,class:"cursor-pointer select-none item",onClick:e[5]||(e[5]=i=>m({name:t(r),datasetId:null,metricId:null,metricType:"Number"}))},[n("div",P,[d(_,{size:"18",type:"mdi",color:"#7839EE",path:t(A)},null,8,["path"]),n("div",R,v(s.$t("SHEET.new_metric"))+":",1)]),n("span",null,v(t(r)),1)]))])])]}),default:y(()=>[n("div",V,[n("div",z,[d(w,{value:t(r),"onUpdate:value":e[0]||(e[0]=o=>x(r)?r.value=o:null),class:"local-overrided",type:"text",placeholder:s.$t("SHEET.search"),onFocus:e[1]||(e[1]=o=>l.value=!0),onBlur:h,onKeydown:[e[2]||(e[2]=o=>l.value=!0),e[3]||(e[3]=C(o=>l.value=!1,["tab"])),e[4]||(e[4]=C(o=>m(t(a)[0]?t(a)[0]:{name:t(r),datasetId:null,metricId:null,metricType:"Number"}),["enter"]))]},null,8,["value","placeholder"])])])]),_:1},8,["visible"])}}}),Ce=H(j,[["__scopeId","data-v-8fbca31f"]]);export{Ce as default};
