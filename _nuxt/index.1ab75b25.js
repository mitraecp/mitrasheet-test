import{_ as j}from"./DisplayPasswordButton.vue.cf942e8c.js";import{r as _,j as k,p as H,Q as W,R as g,f as M,F as z,h as G,i as O,b as Q,e as s,t as m,l as i,w as d,u as o,m as N,S as b,s as p,v,y as J,z as K,T as X,o as Y,A as S,q as Z,U as ee,a as te}from"./entry.102678be.js";import oe from"./MitraButton.1bc6f00c.js";import se from"./GoogleSSOButton.88b887ab.js";import{u as ae}from"./useGoogleServiceAuth.8b812d3a.js";import{r as A}from"./useFormRules.a113b67d.js";import{_ as ne}from"./brand_logo.4b36a3ff.js";import{u as $}from"./useGoToScreen.2d5a4740.js";import{w as ie}from"./index.3105222b.js";/* empty css                            */import"./legacy_store.afec42ea.js";import"./useLegacyService.c9b3bbf8.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";function re(){const a=_(!1);async function u(n){const c=k();if(!a.value){a.value=!0;try{const{error:f}=await H().resendVerificationCode({email:n.email.trim()});f||(c.setConfirmationEmail(n.email.trim()),c.setAutoRedirectTemp(n.password.trim()),W().push({path:g.VALIDATE_EMAIL}))}catch{}a.value=!1}}return{sendToValidateCode:u,loading:a}}const le=a=>(J("data-v-efd7f28e"),a=a(),K(),a),ce={class:"flex items-center justify-center h-full bg-grey-50"},me={class:"flex flex-col items-center login-area auth-card"},de=le(()=>s("img",{src:ne,class:"mb-6 mt-8 shortHeight:mb-3",alt:"mitra_logo"},null,-1)),ue={class:"text-grey-900 font-semibold text-3xl mb-3 shortHeight:mb-3"},pe={class:"text-grey-500 font-normal text-base"},_e={class:"mt-6 mb-4 px-10 flex flex-col justify-center w-full"},fe={class:"flex items-center mb-6"},ve={class:"ml-auto"},ge={class:"pt-2"},he={class:"text-sm text-grey-500 font-normal mb-8"},ye=M({__name:"index",setup(a){const u=_("password"),n=_({email:"",password:""}),c=k(),{sendToValidateCode:f}=re(),{login:C,isReady:T,googleToken:h}=ae(),y=_(!1),R=z.useForm,r=G({email:"",password:""}),B=G({email:[{...A,message:O().$translate("LOGIN.please_insert_email")}],password:[{...A,message:O().$translate("LOGIN.please_insert_password")}]}),{validate:U,validateInfos:w}=R(r,B);function V(){U().then(()=>{x(r)}).catch(()=>{p("LOGIN.fill_required_fields")})}async function x(e){n.value.password=e.password.trim(),n.value.email=e.email.trim();try{y.value=!0;const t=await c.signInWithEmailAndPassword(n.value);await b().getLoggerUser(),$(t)}catch(t){t==="Email code was not confirmed"?(p(t),f(n.value)):p("LOGIN.error")}y.value=!1}return ie(h,async()=>{try{const e=await c.tryGoogleAuth(h.value);await b().getLoggerUser(),$(e)}catch{p("LOGIN.error")}X().resetInviteData()}),(e,t)=>{const I=v("a-input"),L=v("a-form-item"),E=j,P=ee,D=oe,q=se,F=v("a-form");return Y(),Q("div",ce,[s("div",me,[de,s("h2",ue,m(e.$t("LOGIN.login_title")),1),s("h6",pe,m(e.$t("LOGIN.login_subTitle")),1),s("div",_e,[i(F,{model:o(n),name:"login_form",class:"login-form","hide-required-mark":"",layout:"vertical",onFinish:x},{default:d(()=>[i(L,S({"data-cy":"field-email",name:"email",label:e.$t("GLOBAL.email")},o(w).email),{default:d(()=>[i(I,{value:o(r).email,"onUpdate:value":t[0]||(t[0]=l=>o(r).email=l),"data-cy":"input-email",placeholder:e.$t("LOGIN.insert_email"),class:"py-2.5"},null,8,["value","placeholder"])]),_:1},16,["label"]),i(L,S({name:"password","data-cy":"field-password",label:e.$t("GLOBAL.password")},o(w).password),{default:d(()=>[i(I,{value:o(r).password,"onUpdate:value":t[2]||(t[2]=l=>o(r).password=l),"data-cy":"input-password",placeholder:e.$t("LOGIN.insert_password"),type:o(u),class:"py-2.5 my-input"},{suffix:d(()=>[i(E,{onChange:t[1]||(t[1]=l=>u.value=l)})]),_:1},8,["value","placeholder","type"])]),_:1},16,["label"]),s("div",fe,[s("div",ve,[i(P,{to:o(g).FORGOT_PASSWORD,class:"font-medium text-violet-600 text-sm nuxt-link-exact-active","data-cy":"link-forgot-password"},{default:d(()=>[N(m(e.$t("LOGIN.forgot_password")),1)]),_:1},8,["to"])])]),s("div",null,[i(D,{text:"Login",color:"var(--violet-600)","fit-to-content":"",class:"login-button link",onClick:V}),s("div",ge,[i(q,{"preffix-text":e.$t("LOGIN.google_login"),ready:o(T),onClick:o(C)},null,8,["preffix-text","ready","onClick"])])])]),_:1},8,["model"])]),s("span",he,[N(m(e.$t("LOGIN.not_have_account"))+" ",1),s("b",{"data-cy":"link-create-account",class:"text-violet-600 text-sm font-medium cursor-pointer",onClick:t[3]||(t[3]=l=>o(Z)(o(g).SIGNUP))},m(e.$t("LOGIN.create_account")),1)])])])}}});const Be=te(ye,[["__scopeId","data-v-efd7f28e"]]);export{Be as default};
