import{f as N,H as h,r as y,a3 as S,v as V,o as _,b as z,l as g,w as p,e as s,I as w,t as C,u as l,aD as B,C as I,c as O,ah as T,ar as j,J as M,ax as R,x as L,a as E}from"./entry.102678be.js";import{c as F}from"./index.3105222b.js";/* empty css                           */const H={class:"flex"},J={class:"truncate max-w-[100px] text-xs"},U=["title"],q=["title"],G=N({__name:"TableAutoComplete",props:{content:{type:Object,default:()=>{}},header:{type:Object,default:()=>({})}},emits:["set-data-entry"],setup(i,{emit:v}){const n=i,b=h(()=>{var t;return(t=n.header.dataType)!=null?t:n.header.dimensionAttributeType}),c=h(()=>b.value!=="SingleChoice"),e=y(n.content?c.value?n.content:[n.content]:void 0);let d=n.content?n.content.value:void 0;const k=y(n.header.options);S(n,t=>{t.content&&(e.value=c.value?t.content:[t.content])});const A=(t,a)=>a.label.toLowerCase().includes(t.toLowerCase());function f(){if(typeof e.value=="number")return e.value;if(typeof e.value=="object"&&"value"in e.value)return e.value.value;if(Array.isArray(e.value)){if(!c.value){if(!e.value.length)return e.value=[d],d;const t=e.value.length>1?e.value[1]:e.value[0];return d=t,t}return e.value.map(t=>{var a;return(a=t==null?void 0:t.value)!=null?a:t})}}const m=F(()=>{v("set-data-entry",f())},600);function $(t){if(Array.isArray(e.value)){const a=e.value.findIndex(u=>Number(u.value||u)===Number(t));a>-1&&e.value.splice(a,1),m()}}return(t,a)=>{const u=L,D=V("a-select");return _(),z("div",null,[g(D,{value:l(e),"onUpdate:value":a[0]||(a[0]=o=>R(e)?e.value=o:null),options:l(k),bordered:!1,class:"w-full","show-search":"","max-tag-placeholder":o=>`+ ${o.length}`,"show-arrow":!1,"filter-option":A,mode:"multiple","data-cy":`select-${i.header.id}`,align:{offset:[50,0]},"dropdown-class-name":"autocomplete","max-tag-count":1,onChange:a[1]||(a[1]=o=>l(c)?l(m)():v("set-data-entry",f()))},{option:p(({label:o,color:r})=>[s("div",H,[s("div",{class:"!m-0 simple-tag overflow-hidden !rounded-full !px-[8px] !w-fit",style:w({backgroundColor:r+"80",border:`1px solid ${r}`})},[s("div",J,[s("div",{title:o,class:"truncate"},C(o),9,U)])],4)])]),suffixIcon:p(()=>[g(u,{class:"mt-1",size:"20",type:"mdi",path:l(B)},null,8,["path"])]),tagRender:p(({label:o,option:r})=>{var x;return[s("div",{class:"simple-tag !rounded-full !px-[8px]",style:w({backgroundColor:r.color+"80",border:`1px solid ${r.color}`})},[s("div",{class:I([{"!max-w-[45px]":((x=i.content)==null?void 0:x.length)>1},"truncate max-w-[100px] text-xs"])},[s("div",{title:o,class:"truncate"},C(o),9,q)],2),l(c)?(_(),O(u,{key:0,class:"cursor-pointer ml-1 pointer-events-auto",size:"10",type:"mdi",path:l(T),onClick:j(K=>$(r.value),["stop"])},null,8,["path","onClick"])):M("",!0)],4)]}),_:1},8,["value","options","max-tag-placeholder","data-cy"])])}}}),X=E(G,[["__scopeId","data-v-906cca80"]]);export{X as default};
