import{f as F,H as N,r as y,v as T,o as p,b as _,e as l,l as i,w as d,u as t,ao as G,C as f,k as P,M as q,ap as H,aq as J,ar as $,t as w,N as I,as as R,at as j,c as M,au as Q,ah as W,av as X,O as Y,aw as Z,ax as O,J as V,ay as ee,a7 as te,x as se,y as oe,z as ae,a as ne}from"./entry.102678be.js";import le from"./DatabaseTableList.f9d063c9.js";import ie from"./DatabaseAddMenu.6c9815c5.js";import{u as ce}from"./dataset_store.f318df7c.js";import{u as re}from"./dimension_store.1aca34b5.js";import{u as pe}from"./metadata_store.49c5a48c.js";/* empty css                         */import"./MButton.vue.eb72e6c7.js";/* empty css                    */import"./useLegacyService.c9b3bbf8.js";const ue=h=>(oe("data-v-fbf2d5af"),h=h(),ae(),h),de={class:"tab-list"},ve={class:"flex items-center"},me={class:"tab"},_e=["onClick"],fe=["onClick"],he=["onUpdate:modelValue","onBlur","onKeyup"],be={class:"m-[-10px] w-[130px] text-[14px] text-[var(--grey-700)]"},ye=["onClick"],ke={class:"ml-3"},xe=["onClick"],Ce={class:"ml-3"},ge=["onClick"],De=ue(()=>l("div",{class:"ml-3"},"Delete",-1)),we={class:"tab"},Se=F({__name:"DatabaseTabs",setup(h){const S=ce(),L=re(),v=pe(),k=N(()=>v.activeMetadataList),b=y(-1),c=N(()=>v.activeIndex),u=y(!1),m=y(!1),x=y();function E(a){a.isDimension?L.updateDimension(a):S.editDataset(a),b.value=-1}function U(){x.value[0].blur()}function B(a,e){c.value===e&&!a.isNative?(b.value=e,te(()=>{const s=x.value[0];s.selectionStart=s.value.length,s.selectionEnd=s.value.length,s.focus()})):C(e)}function z(a,e){const s=()=>{const g=k.value.length-1===a?a-1:a;v.deleteTable(a),v.changeIndex(g),m.value=!1};e?e!=null&&e.isNative||(e.isDimension?L.deleteDimension(e.id):S.removeDataset(e.id)).then(()=>{s()}):s()}function C(a){b.value=-1,v.changeIndex(a)}return(a,e)=>{const s=se,g=le,D=T("a-popover"),A=T("a-divider"),K=ie;return p(),_("div",de,[l("div",ve,[i(D,{trigger:"click",placement:"bottomLeft"},{content:d(()=>[i(g)]),default:d(()=>[l("div",me,[i(s,{class:"cursor-pointer",color:"#424967",type:"mdi",size:"16",path:t(G)},null,8,["path"])])]),_:1}),l("div",{class:f(["h-[16px]",{border:t(c)-1!==-1||!t(k).length}])},null,2)]),(p(!0),_(P,null,q(t(k),(o,n)=>(p(),_("div",{key:o.id,class:"flex items-center",onClick:r=>C(n)},[l("div",{class:f(["tab",{active:n===t(c)}])},[i(s,{size:"16",color:n===t(c)?"#0E1428":"#424967",type:"mdi",path:"isDimension"in o?t(H):t(J)},null,8,["color","path"]),t(b)!==n?(p(),_("div",{key:0,class:f(["truncate max-w-[100px] span text-grey-600",{"cursor-text":!o.isNative&&n===t(c)}]),onClick:$(r=>B(o,n),["stop"])},w(o.name),11,fe)):I((p(),_("input",{key:1,ref_for:!0,ref_key:"input",ref:x,"onUpdate:modelValue":r=>o.name=r,class:"max-w-[126px] input",type:"text",onClick:e[0]||(e[0]=$(()=>{},["stop"])),onBlur:r=>E(o),onKeyup:j(U,["enter"])},null,40,he)),[[R,o.name]]),n===t(c)?(p(),M(D,{key:2,visible:t(m),"onUpdate:visible":e[1]||(e[1]=r=>O(m)?m.value=r:null),trigger:"click"},{content:d(()=>[l("div",be,[l("div",{class:"select-tile items-center pl-[10px] my-[2px] h-[28px] cursor-pointer",onClick:r=>(B(o,n),m.value=!1)},[i(s,{size:"15",color:"var(--grey-700)",type:"mdi",path:t(Q)},null,8,["path"]),l("div",ke,w(a.$t("GLOBAL.rename")),1)],8,ye),l("div",{class:"select-tile items-center pl-[10px] my-[2px] h-[28px] cursor-pointer",onClick:r=>z(n)},[i(s,{size:"15",color:"var(--grey-700)",type:"mdi",path:t(W)},null,8,["path"]),l("div",Ce,w(a.$t("GLOBAL.close")),1)],8,xe),i(A,{class:"m-0 border-[#C7CBDD]"}),l("div",{class:f([{"opacity-50":o.isNative},"select-tile items-center pl-[10px] my-[2px] h-[28px] cursor-pointer"]),onClick:r=>z(n,o)},[i(s,{size:"15",color:"var(--grey-700)",type:"mdi",path:t(X)},null,8,["path"]),De],10,ge)])]),default:d(()=>[I(i(s,{class:"cursor-pointer ml-[10px]",color:"#424967",type:"mdi",size:"18",path:t(Z)},null,8,["path"]),[[Y,n===t(c)]])]),_:2},1032,["visible"])):V("",!0)],2),l("div",{class:f(["h-[16px]",{border:n!==t(c)&&n!==t(c)-1}])},null,2)],8,_e))),128)),i(D,{visible:t(u),"onUpdate:visible":e[4]||(e[4]=o=>O(u)?u.value=o:null),trigger:"click",placement:"bottomLeft"},{content:d(()=>[t(u)?(p(),M(K,{key:0,onSubmit:e[2]||(e[2]=o=>(C(o),u.value=!1)),onCancel:e[3]||(e[3]=o=>u.value=!1)})):V("",!0)]),default:d(()=>[l("div",we,[i(s,{class:"cursor-pointer",color:"#424967",type:"mdi",size:"16",path:t(ee)},null,8,["path"])])]),_:1},8,["visible"])])}}}),Ee=ne(Se,[["__scopeId","data-v-fbf2d5af"]]);export{Ee as default};
