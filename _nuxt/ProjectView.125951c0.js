import L from"./LegacyHeader.017f8934.js";import N from"./ProjectContent.0b11a622.js";import R from"./ModuleContent.911a7557.js";import M from"./SquaredBadge.8fadbfe8.js";import{f as $,Y as z,ae as O,T as U,r as w,al as c,j as Y,E as q,o as s,b as F,u as o,c as i,e as f,w as u,l as _,aV as G,aW as J,J as X,k as K,aX as Q,s as Z,x as oo,y as eo,z as to,aY as ro,a as ao}from"./entry.102678be.js";import no from"./LargeButton.6c6b9129.js";import so from"./CollaboratorsCard.1ce6e712.js";import{u as co}from"./legacy_store.afec42ea.js";import{u as io}from"./useHeadSettings.f1985dcc.js";import{a as po}from"./useGoToScreen.2d5a4740.js";import"./ProjectView.vue.c9650a78.js";import lo from"./ProjectHeader.5b45b4c8.js";import"./ProjectSettings.24d1af27.js";import"./MitraIconButton.142ef623.js";import"./MitraButton.1bc6f00c.js";import"./useMappedIcons.1032e4dc.js";import"./useFormRules.a113b67d.js";import"./global_constants.3e2bf4d4.js";import"./ProjectNewItemModal.a1a581a1.js";import"./folder_open_black.966f6325.js";import"./layout_black.3b56b7e5.js";import"./folder_open_blue.ee63f467.js";import"./HeaderBar.vue.02da9777.js";import"./simple_grid_purple.8fc55868.js";import"./simple_grid_grey.66d15878.js";import"./layout_violet.70afa0aa.js";/* empty css                         *//* empty css                                    */import"./CollaboratorAvatar.vue.dd08577c.js";import"./useLegacyService.c9b3bbf8.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";/* empty css                    *//* empty css                             */import"./members_store.a95d955a.js";import"./dimension_store.1aca34b5.js";import"./dataset_store.f318df7c.js";import"./metadata_store.49c5a48c.js";/* empty css                           */import"./useChartsSettings.971a22bb.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const mo=p=>(eo("data-v-3538b649"),p=p(),to(),p),uo={class:"flex justify-between shortHeight:mt-[20px] mt-[32px] overflow-hidden h-full"},_o={class:"ml-5"},fo=mo(()=>f("h6",{class:"text-grey-900 font-semibold"},"Database",-1)),jo=$({__name:"ProjectView",setup(p){const e=z(),j=O(),l=U(),m=w(!1),{selectedWorkspace:d,selectedProject:r,projectOpened:x,readonlyProject:S}=c(e),{projectCollaborators:y,workspaceCollaborators:b}=c(l),{workbookList:C}=c(j),{moduleList:D}=c(co()),{merge:k}=c(Y()),v=w();q(()=>{g(r.value.id),io().setHeadTitle(r.value.name)});async function H({project:t}){ro().setViewModeTo("SHEET"),t.id!==r.value.id&&(g(t.id),await e.setSelectedProject(t))}function g(t){T(),j.fetchWorkbooks(t)}async function T(){m.value=!0,x.value?await l.fetchProjectCollaborators(r.value.id):await l.fetchWorkspaceCollaborator(d.value.id),setTimeout(()=>{m.value=!1},1e3)}async function h(t){const{name:n,...a}=t;await e.updateProjectSettings({...r.value,name:n,projectConfig:{icon:a.icon,color:a.color}}),Q().switchDialog("projectSettingsController")}async function P(t){var n;try{await e.removeProject(t);const a=e.getNextProject;a?H({project:a}):e.setEmptyProject()}catch(a){Z((n=a.message)!=null?n:"DATABASE.remove_error")}}return(t,n)=>{const a=L,B=N,I=R,E=M,V=oo,W=no,A=so;return s(),F(K,null,[o(k)?(s(),i(a,{key:1,ref_key:"projectHeaderRef",ref:v,project:o(r),readonly:o(e).readonlyProject,onUpdate:h,onDeleteProject:P},null,8,["project","readonly"])):(s(),i(o(lo),{key:0,ref_key:"projectHeaderRef",ref:v,project:o(r),readonly:o(e).readonlyProject,onUpdate:h,onDeleteProject:P},null,8,["project","readonly"])),f("div",uo,[o(k)?(s(),i(I,{key:1,class:"basis-4/5",modules:o(D),project:o(r),"workspace-id":o(d).id,"readonly-project":o(e).readonlyProject},null,8,["modules","project","workspace-id","readonly-project"])):(s(),i(B,{key:0,class:"basis-4/5",sheets:o(C),project:o(r),"workspace-id":o(d).id,"readonly-project":o(e).readonlyProject},null,8,["sheets","project","workspace-id","readonly-project"])),f("div",_o,[o(S)?X("",!0):(s(),i(W,{key:0,class:"my-4 mt-0 large-btn",onClick:n[0]||(n[0]=yo=>o(po)(void 0,{newTab:!0}))},{badge:u(()=>[_(E,{content:{background:"var(--violet-200)",color:"var(--violet-600)",icon:o(G)}},null,8,["content"])]),body:u(()=>[fo]),suffix:u(()=>[_(V,{class:"database-icon hidden",size:"18px",type:"mdi",color:"var(--grey-600)",path:o(J)},null,8,["path"])]),_:1})),_(A,{loading:o(m),readonly:o(e).readonlyProject,collabs:[...o(b).collaborators,...o(b).openInvitations,...o(y).collaborators,...o(y).openInvitations]},null,8,["loading","readonly","collabs"])])])],64)}}}),le=ao(jo,[["__scopeId","data-v-3538b649"]]);export{le as default};
