import{_ as N}from"./SendedMail.vue.fa6f974d.js";import O from"./MitraButton.1bc6f00c.js";import{_ as S}from"./ResendCode.vue.f133c41c.js";import{f as $,r as c,j as w,al as G,b as m,e,u as t,k as A,t as a,l as n,m as y,S as T,q as p,R as _,x as E,o as u,B as k,am as R}from"./entry.102678be.js";import{u as j}from"./useGoToScreen.2d5a4740.js";import{_ as B}from"./brand_logo.4b36a3ff.js";import U from"./ConfirmCode.b2d079fe.js";import"./legacy_store.afec42ea.js";import"./useLegacyService.c9b3bbf8.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";import"./regexp.6086e722.js";/* empty css                        */const V={class:"flex items-center justify-center h-full bg-grey-50"},P={class:"flex flex-col items-center login-area"},z={class:"auth-card mb-6 px-5 flex flex-col justify-center items-center"},M=e("div",{class:"flex items-center justify-center mt-8"},[e("img",{src:B,alt:"mitra_logo"})],-1),W={class:"text-grey-900 font-semibold text-3xl mt-6"},q={class:"pl-2.5"},D={class:"pl-2.5"},F={key:1,class:"flex-col my-8 mx-10"},H={class:"flex items-center justify-center"},J={class:"px-2 py-2 bg-success-50 rounded-full flex items-center"},K={class:"px-2 py-2 bg-success-100 rounded-full flex items-center"},Q={class:"whitespace-nowrap flex-shrink-0"},X={class:"text-grey-900 font-semibold text-3xl pt-1 flex items-center justify-center"},Y={class:"text-grey-500 text-base font-normal text-center pt-3"},Z=e("br",null,null,-1),fe=$({__name:"validate-email",setup(ee){const f=c(!1),r=c(!1),x=c(!1),v=c(null),o=w(),{confirmationEmail:l}=G(o);async function g(s){var i;if(r.value=!0,!x.value){try{await o.validateVerificationCode({email:l.value,code:s.toString()}),f.value=!0;try{await o.signInWithEmailAndPassword({email:l.value,password:o.getAutoRedirectTemp}),o.setAutoRedirectTemp("")}catch{}await T().getLoggerUser(),setTimeout(()=>{o.setConfirmationEmail(),j()},2e3)}catch{(i=v.value)==null||i.resetCode()}r.value=!1}}function C(){o.setConfirmationEmail(),p(_.SIGNUP)}return(s,i)=>{const h=N,b=O,I=S,d=E;return u(),m("div",V,[e("div",P,[e("div",z,[t(f)?(u(),m("div",F,[e("div",H,[e("div",J,[e("div",K,[n(d,{class:"text-success-500 h-[33.71px] w-[33.71px]",type:"mdi",path:t(R)},null,8,["path"])])])]),e("div",Q,[e("div",X,a(s.$t("LOGIN.verification_completed")),1),e("div",Y,[y(a(s.$t("LOGIN.redirecting_your_first"))+" ",1),Z,y(" Workspace! ")])])])):(u(),m(A,{key:0},[M,e("div",W,a(s.$t("LOGIN.check_email")),1),n(h,{email:t(l),onChangeEmail:C},null,8,["email"]),n(U,{ref_key:"codeInput",ref:v,disabled:t(r),"invalid-code":t(x),onValidate:g},null,8,["disabled","invalid-code"]),n(b,{loading:t(r),text:s.$t("GLOBAL.confirm"),color:"var(--violet-600)","fit-to-content":"",class:"login-button link",onClick:g},null,8,["loading","text"]),n(I,{target:t(l)},null,8,["target"]),e("div",{class:"text-sm text-grey-500 font-medium pt-8 flex cursor-pointer",onClick:i[0]||(i[0]=L=>t(p)(t(_).SIGNUP))},[n(d,{size:"18px",type:"mdi",path:t(k)},null,8,["path"]),e("div",q,a(s.$t("LOGIN.back_registration_screen")),1)]),e("div",{class:"text-sm text-grey-500 font-medium pt-2 flex pb-8 cursor-pointer",onClick:i[1]||(i[1]=L=>t(p)(t(_).LOGIN))},[n(d,{size:"18px",type:"mdi",path:t(k)},null,8,["path"]),e("div",D,a(s.$t("LOGIN.back_login_screen")),1)])],64))])])])}}});export{fe as default};
