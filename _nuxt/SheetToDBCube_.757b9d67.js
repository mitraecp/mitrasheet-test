import O from"./MetadataAddButton.41902bb4.js";import Y from"./DroppableWrapper.e14af8ec.js";import U from"./SheetToDBAddCube_.f1fa7175.js";import{_ as V}from"./MetadataButton.vue.350ca6ce.js";import{f as q,r as d,dK as L,v as z,o as b,b as y,e as I,l as s,w as v,u as n,n as E,g as P,ax as T,k as C,M as J,c as K,ap as W,ar as X,s as w,y as Z,z as j,a as G}from"./entry.102678be.js";import{u as H}from"./useChartsSettings.971a22bb.js";import"./ProjectView.vue.c9650a78.js";import"./AddCubeAutocomplete.6aa2d88e.js";import"./dataset_store.f318df7c.js";import"./useLegacyService.c9b3bbf8.js";import"./dimension_store.1aca34b5.js";import"./MButton.vue.eb72e6c7.js";/* empty css                    *//* empty css                         *//* empty css                             */import"./MitraButton.1bc6f00c.js";import"./legacy_store.afec42ea.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./HeaderBar.vue.02da9777.js";import"./members_store.a95d955a.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           */import"./MitraIconButton.142ef623.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const Q=l=>(Z("data-v-10ff9c1e"),l=l(),j(),l),ee={class:"flex flex-col container"},te=Q(()=>I("div",{class:"mb-4"},null,-1)),oe=q({__name:"SheetToDBCube_",emits:["trigger-update-view","set-dynamic-selection-by-range"],setup(l,{emit:f}){const _=H(),a=d(),m=d(!1),c=L();function h(o){c.addSheetToDBMetricsForm(o)}function A(o){c.updateSheetToDBMetricsFormByIndex(o,B)}const x=d();let B=-1;const M=(o,e)=>{m.value=!0,x.value=o,B=e};function k(o){c.removeSheetToDBMetricsFormByIndex(o)}const g=d(!1),F=()=>{g.value=!0};function $(){g.value=!1}const R=o=>{var u,p;const e=JSON.parse(o.dataTransfer.getData("value")).data;if(!_.verifyIfDataIsUniqueInAxisYAndAxisX((u=e.dimensionId)!=null?u:e.id)){w("TOAST.unable_add_same_dimension");return}if("dimensionId"in e||e.isDimension){const i=(p=e.dimensionId)!=null?p:e.id;_.setAxisY(i),f("trigger-update-view")}else if("dimensionAttributeType"in e)if(e.dimensionAttributeType!=="Number"){const i=e.referencedDimensionId;_.setAxisY(i),f("trigger-update-view")}else w("warning",`Dado tipo ${e.dimensionAttributeType} s\xF3 pode ser adicionado como m\xE9trica`)};return(o,e)=>{const D=O,u=Y,p=U,i=z("a-popover"),N=V;return b(),y(C,null,[I("div",ee,[s(u,E(P({onDragOver:F,onDragLeave:$,onDrop:R})),{default:v(()=>[s(D,{hover:n(g),onClick:e[0]||(e[0]=t=>a.value=!0)},null,8,["hover"])]),_:1},16),s(i,{visible:n(a),"onUpdate:visible":e[3]||(e[3]=t=>T(a)?a.value=t:null),"overlay-class-name":"w-[320px]",placement:"bottomRight",trigger:"click","arrow-point-at-center":"","destroy-popup-on-hide":""},{content:v(()=>[s(p,{onCancel:e[1]||(e[1]=t=>a.value=!1),onSubmit:h,onSetDynamicSelectionByRange:e[2]||(e[2]=t=>f("set-dynamic-selection-by-range",t))})]),_:1},8,["visible"])]),s(i,{visible:n(m),"onUpdate:visible":e[6]||(e[6]=t=>T(m)?m.value=t:null),"overlay-class-name":"w-[320px]",placement:"bottomRight",trigger:"click","arrow-point-at-center":""},{content:v(()=>{var t,r;return[s(p,{name:(t=n(x))==null?void 0:t.name,"content-range":(r=n(x))==null?void 0:r.contentRange,onCancel:e[5]||(e[5]=S=>m.value=!1),onSubmit:A},null,8,["name","content-range"])]}),default:v(()=>[(b(!0),y(C,null,J(n(c).sheetToDBForm.sheetToDBMetricsForm,(t,r)=>(b(),K(N,{key:`cube-chip-${r}`,text:t.name,icon:n(W),onClose:S=>k(r),onClick:S=>M(t,r),onContextmenu:e[4]||(e[4]=X(()=>{},["prevent","stop"]))},null,8,["text","icon","onClose","onClick"]))),128))]),_:1},8,["visible"]),te],64)}}}),Re=G(oe,[["__scopeId","data-v-10ff9c1e"]]);export{Re as default};
