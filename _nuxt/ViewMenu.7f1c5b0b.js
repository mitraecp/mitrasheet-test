import pe from"./BaseContentHeader.0262d7f9.js";import{f as ue,aY as W,al as z,E as me,bP as ve,a3 as we,r as _,H as b,aj as f,cN as Y,dN as J,N as ge,O as he,u as i,b as v,l as n,e as o,c as y,w as d,J as C,t as p,ax as S,x as fe,v as k,o as r,dS as _e,ak as ye,I as Ee,m as xe,aw as X,aD as Te,y as be,z as Ce,a as Se}from"./entry.102678be.js";import ke from"./SimpleAccordion.72c52608.js";import{_ as $e}from"./MButton.vue.eb72e6c7.js";/* empty css                    */import{_ as He}from"./HeaderBar.vue.02da9777.js";import{_ as Fe}from"./ViewYAxis.vue.f224b60d.js";import{_ as Ve}from"./ViewXAxis.vue.25f97c49.js";import{_ as ze}from"./ViewFilter.vue.d756c6e1.js";import{u as Ae}from"./dimension_store.1aca34b5.js";import{_ as q}from"./ViewMeasureForm.vue.30497a93.js";import{u as Be}from"./dataset_store.f318df7c.js";import{u as Ie,a as K}from"./useChartsSettings.971a22bb.js";import"./ProjectView.vue.c9650a78.js";import"./MitraIconButton.142ef623.js";import"./MetadataAddButton.41902bb4.js";import"./DroppableWrapper.e14af8ec.js";import"./ViewDimensionSelector.7211b5bd.js";import"./BaseContentFooter.vue.20fdc5e7.js";import"./MitraButton.1bc6f00c.js";import"./MetadataButton.vue.350ca6ce.js";import"./ViewFilterSelector.76e5ee38.js";import"./useLegacyService.c9b3bbf8.js";import"./ViewDatasetSelector.d6ec789c.js";/* empty css                         *//* empty css                             */import"./legacy_store.afec42ea.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./members_store.a95d955a.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           *//* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const A=c=>(be("data-v-8cd2ce7d"),c=c(),Ce(),c),De={class:"flex flex-col sidebar-right min-w-[260px] max-w-[260px] noselect"},Oe={class:"p-4 overflow-auto"},Pe={class:"pb-4"},Me={class:"label-title"},Ue={class:"text-error-500 font-sm"},Re={key:0,class:"px-1"},je={class:"flex items-center px-1"},Ne={class:"flex mr-1 px-2 items-center"},Le={class:"flex justify-start items-center"},Ge={class:"px-2"},We={class:"flex ustify-end items-center"},Ye=A(()=>o("div",{class:"h-px bg-grey-200 my-0 -mx-4 w-auto"},null,-1)),Je={class:"pt-4 pb-2"},Xe={key:0},qe={key:0},Ke={key:1},Qe=A(()=>o("div",{class:"h-px bg-grey-200 my-0 -mx-4 w-auto"},null,-1)),Ze={class:"pt-4 pb-2"},et=A(()=>o("div",{class:"h-px bg-grey-200 my-0 -mx-4 w-auto"},null,-1)),tt={key:1,class:"px-1"},it={class:"flex items-center px-1"},ot={class:"px-2"},st={class:"my-2 items-center justify-between"},nt={key:0,class:"px-2"},at={class:"my-2 items-center justify-between"},lt={class:"flex justify-start items-center"},rt={class:"flex ustify-end items-center"},dt={key:2,class:"py-4"},ct={class:"flex flex-col w-full justify-between"},pt={class:"flex justify-between mb-2"},ut={class:"label-title"},mt={class:"flex justify-between mt-2"},vt={class:"label-title"},wt=ue({__name:"ViewMenu",props:{tableType:{type:String,default:"dimension"},viewChartMenu:{type:Boolean,default:!1},validationViewForm:{type:Object,default:()=>({range:{isValid:!0}})}},emits:["update-view","block-changed","close-view","update-range","show-all","view-filter","trigger-update-view","clear-borders-by-range","verify-range-is-valid","view-menu-change"],setup(c,{emit:l}){const B=c,Q=W(),{getDataViewMode:E}=z(Q),a=Ie(),$=K();me(()=>{l("view-menu-change")}),ve(()=>{l("view-menu-change")});const{preview:I}=z(W());we(()=>I.value,t=>{t&&l("close-view")});function Z(){return B.validationViewForm.range.message}const D=Ae(),ee=Be(),{dimensions:h}=z(D),m=_(),te=b(()=>f.global.t(B.viewChartMenu?"SHEET.graphics_editor":"SHEET.configure_view"));function ie(){if(a.viewForm.chartTitle)m.value=a.viewForm.chartTitle;else return m.value!==a.viewForm.chartTitle&&(m.value=""),f.global.t("SHEET.chart_title")}function oe(){var u;const{changeChartTitleByIndex:t}=K(),e=(u=a.viewForm.indexOfChart)!=null?u:-1;e!==-1&&(a.setTitleOfChart(m.value),t(m.value,e,a.viewForm))}const x=b({get(){return a.viewForm.range},set(t){l("clear-borders-by-range",a.viewForm.range),t&&a.setRange(t)}}),se=t=>{a.viewForm.autoRange=t.target.checked,l("trigger-update-view")},H=b({get(){return a.viewForm.showAll},set(t){a.setShowAll(!!t)}}),F=b({get(){return a.viewForm.measureInAxes},set(t){a.setMeasureInAxes(!!t)}});function ne(t){a.setFilter(t),l("trigger-update-view")}const w=_(),V=_();function ae(){var e;const t=(e=a.viewForm.indexOfChart)!=null?e:-1;if(t!==-1)switch($.listOfChartitems[t].graphicForm.chartType){case"PIE":return w.value="PIE",V.value="Pizza","Pizza";case"BAR":return w.value="BAR",f.global.t("SHEET.bars_lines_area");case"DONUT":return w.value="PIE",V.value="Donut","Pizza";default:return w.value="None",f.global.t("SHEET.none_selected")}else return f.global.t("SHEET.none_selected")}function O(t){var u;const e=(u=a.viewForm.indexOfChart)!=null?u:-1;e!==-1&&$.changeChartType(t,e,a.viewForm)}const le=_([{label:f.global.t("SHEET.bars_lines_area"),icon:Y,onClick:()=>O("BAR")},{label:"Pizza",icon:J,onClick:()=>O("PIE")}]),re=_([{label:"Pizza",onClick:()=>P("PIE")},{label:"Donut",onClick:()=>P("DONUT")}]);function P(t){var u;const e=(u=a.viewForm.indexOfChart)!=null?u:-1;e!==-1&&$.changePieChartType(t,e,a.viewForm)}return D.fetchDimensions(),ee.fetchDatasets(),(t,e)=>{const u=pe,g=fe,M=k("a-input"),de=k("a-checkbox"),T=ke,U=$e,R=He,j=k("a-dropdown"),N=Fe,L=Ve,ce=ze,G=k("a-switch");return ge((r(),v("aside",De,[n(u,{"box-class":"p-4 light-border-b",title:i(te),onCancel:e[0]||(e[0]=s=>l("close-view"))},null,8,["title"]),o("div",Oe,[o("div",Pe,[i(E)==="SHEET"&&!c.viewChartMenu?(r(),y(T,{key:0,title:"Posi\xE7\xE3o"},{default:d(()=>[o("p",Me,p(t.$t("SHEET.RANGE.area_range")),1),o("div",null,[n(M,{value:i(x),"onUpdate:value":e[3]||(e[3]=s=>S(x)?x.value=s:null),class:"range-input range-btn mt-1.5",placeholder:"Selecione um intervalo",style:Ee({border:c.validationViewForm.range.isValid?"1px solid var(--grey-300)":"1px solid var(--error-300)"}),onChange:e[4]||(e[4]=s=>l("verify-range-is-valid",i(x)))},{suffix:d(()=>[c.validationViewForm.range.isValid?(r(),y(g,{key:0,color:"var(--grey-400)",type:"mdi",size:"19",path:i(_e),onClick:e[1]||(e[1]=s=>l("close-view"))},null,8,["path"])):(r(),y(g,{key:1,color:"var(--error-500)",type:"mdi",size:"19",path:i(ye),onClick:e[2]||(e[2]=s=>l("close-view"))},null,8,["path"]))]),_:1},8,["value","style"]),o("span",Ue,p(Z()),1)]),n(de,{checked:i(a).viewForm.autoRange,"onUpdate:checked":e[5]||(e[5]=s=>i(a).viewForm.autoRange=s),class:"mt-4",onChange:se},{default:d(()=>[xe(p(t.$t("SHEET.automatic")),1)]),_:1},8,["checked"])]),_:1})):C("",!0)]),i(E)==="SHEET"&&c.viewChartMenu?(r(),v("div",Re,[o("div",je,[o("span",null,p(t.$t("SHEET.chart_type")),1)]),o("div",Ne,[n(j,{trigger:"click","overlay-class-name":"py-2 px-3 mitra-popover-wrapper"},{overlay:d(()=>[n(R,{options:i(le)},null,8,["options"])]),default:d(()=>[n(U,{style:{transition:"all 0.7s ease"},class:"flex justify-between items-center mt-2 mb-2 rounded-md cursor-pointer",mockup:!1},{default:d(()=>[o("div",Le,[i(w)==="BAR"?(r(),y(g,{key:0,color:"#5D6585",path:i(Y),type:"mdi",size:"18px"},null,8,["path"])):(r(),y(g,{key:1,color:"#5D6585",path:i(J),type:"mdi",size:"18px"},null,8,["path"])),o("div",Ge,p(ae()),1)]),o("div",We,[n(g,{color:"#5D6585",path:i(X),type:"mdi",size:"18px"},null,8,["path"])])]),_:1})]),_:1})])])):C("",!0),Ye,o("div",Je,[n(T,{title:t.$t("SHEET.elements")},{default:d(()=>[i(E)==="SHEET"&&c.viewChartMenu?(r(),v("div",Xe,[n(N,{dimensions:i(h),"view-title":t.$t("SHEET.axle"),onTriggerUpdateView:e[6]||(e[6]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"]),i(w)!=="PIE"?(r(),v("div",qe,[n(L,{dimensions:i(h),"view-title":t.$t("SHEET.series_generator_axis"),onTriggerUpdateView:e[7]||(e[7]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"])])):C("",!0),n(q,{dimensions:i(h),"view-title":t.$t("SHEET.metrics"),onBlockChanged:e[8]||(e[8]=s=>l("block-changed")),onTriggerUpdateView:e[9]||(e[9]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"])])):(r(),v("div",Ke,[n(L,{dimensions:i(h),"view-title":t.$t("SHEET.columns_2"),onTriggerUpdateView:e[10]||(e[10]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"]),n(N,{dimensions:i(h),"view-title":t.$t("SHEET.rows_2"),class:"py-2",onTriggerUpdateView:e[11]||(e[11]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"]),n(q,{dimensions:i(h),"view-title":t.$t("GLOBAL.data"),class:"pt-2",onBlockChanged:e[12]||(e[12]=s=>l("block-changed")),onTriggerUpdateView:e[13]||(e[13]=s=>l("trigger-update-view",s))},null,8,["dimensions","view-title"])]))]),_:1},8,["title"])]),Qe,o("div",Ze,[n(T,{title:t.$t("GLOBAL.actions.filter")},{default:d(()=>[n(ce,{index:"viewFilter","inset-list":!1,onSubmit:ne})]),_:1},8,["title"])]),et,i(E)==="SHEET"&&c.viewChartMenu?(r(),v("div",tt,[o("div",it,[n(g,{class:"cursor-pointer mr-1",type:"mdi",size:"22",path:i(Te)},null,8,["path"]),o("span",null,p(t.$t("SHEET.personalization")),1)]),o("div",ot,[o("div",st,[o("span",null,p(t.$t("SHEET.title_text")),1),n(M,{value:i(m),"onUpdate:value":e[14]||(e[14]=s=>S(m)?m.value=s:null),class:"my-2 rounded-md",placeholder:ie(),onInput:oe},null,8,["value","placeholder"])])]),i(w)==="PIE"?(r(),v("div",nt,[o("div",at,[o("span",null,p(t.$t("SHEET.style")),1),n(j,{trigger:"click","overlay-class-name":"py-2 px-3 mitra-popover-wrapper"},{overlay:d(()=>[n(R,{options:i(re)},null,8,["options"])]),default:d(()=>[n(U,{style:{transition:"all 0.7s ease"},class:"flex justify-between items-center mt-2 mb-2 rounded-md cursor-pointer",mockup:!1},{default:d(()=>[o("div",lt,[o("div",null,p(i(V)),1)]),o("div",rt,[n(g,{color:"#5D6585",path:i(X),type:"mdi",size:"18px"},null,8,["path"])])]),_:1})]),_:1})])])):C("",!0)])):(r(),v("div",dt,[n(T,{title:t.$t("GLOBAL.settings")},{default:d(()=>[o("div",ct,[o("div",pt,[o("span",ut,p(t.$t("SHEET.VIEW.show_all")),1),n(G,{checked:i(H),"onUpdate:checked":e[15]||(e[15]=s=>S(H)?H.value=s:null),onChange:e[16]||(e[16]=s=>{l("show-all",s),l("trigger-update-view")})},null,8,["checked"])]),o("div",mt,[o("span",vt,p(t.$t("SHEET.VIEW.block_as_line")),1),n(G,{checked:i(F),"onUpdate:checked":e[17]||(e[17]=s=>S(F)?F.value=s:null),onChange:e[18]||(e[18]=s=>l("trigger-update-view"))},null,8,["checked"])])])]),_:1},8,["title"])]))])],512)),[[he,!i(I)]])}}}),ti=Se(wt,[["__scopeId","data-v-8cd2ce7d"]]);export{ti as default};
