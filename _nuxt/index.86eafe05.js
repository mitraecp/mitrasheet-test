import{f as H,r as c,h as N,j as J,i as y,F as Q,b as h,e as n,t as u,l as s,w as i,u as e,s as b,Q as K,R as A,aj as X,q as Y,v as x,y as Z,z as ee,S as te,T as ae,o as w,A as $,ak as k,J as C,x as oe,a as se}from"./entry.102678be.js";import{_ as ne}from"./DisplayPasswordButton.vue.cf942e8c.js";import le from"./PasswordStrength.b6dd77e9.js";import ie from"./MitraButton.1bc6f00c.js";import re from"./GoogleSSOButton.88b887ab.js";import{u as me}from"./useGoogleServiceAuth.8b812d3a.js";import{u as pe}from"./usePasswordRules.c7f79ae8.js";import{r as I}from"./useFormRules.a113b67d.js";import{_ as de}from"./brand_logo.4b36a3ff.js";import{u as ce}from"./useGoToScreen.2d5a4740.js";import{w as ue}from"./index.3105222b.js";/* empty css                             *//* empty css                            */import"./regexp.6086e722.js";import"./legacy_store.afec42ea.js";import"./useLegacyService.c9b3bbf8.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";const _e=m=>(Z("data-v-f72b61ee"),m=m(),ee(),m),fe={class:"flex items-center justify-center h-full bg-grey-50"},ve={class:"flex flex-col items-center login-area h-full justify-center"},ge={class:"auth-card pt-8 px-10 flex flex-col justify-center w-full overflow-auto"},ye={class:"flex-col justify-center items-center h-auto"},he=_e(()=>n("div",{class:"flex items-center justify-center"},[n("img",{src:de,alt:"mitra_logo"})],-1)),xe={class:"text-grey-900 font-semibold text-3xl justify-center flex pt-6"},we={class:"text-base text-grey-500 font-normal flex justify-center pt-3"},Ie={key:0},Le={key:0},Se={class:"flex flex-col items-center mt-5"},Ge={class:"text-sm text-grey-400 font-normal"},Oe={class:"pl-1 text-sm text-violet-600 font-medium"},Ne=H({__name:"index",setup(m){const L=c("password"),a=N({email:"",password:"",name:""}),p=J(),{login:R,isReady:j,googleToken:S}=me(),d=c(!1),_=c(!1),U=c(!1),{passwordRules:B,passwordStrengthRef:f}=pe(),T=N({name:[{...I,message:y().$translate("LOGIN.please_insert_name")}],email:[{...I,message:y().$translate("LOGIN.please_insert_email")}],password:[{...I,message:y().$translate("LOGIN.please_insert_password")}]}),E=Q.useForm,{validate:F,validateInfos:r}=E(a,T);function P(){F().then(()=>{G(a)}).catch(()=>{b("LOGIN.fill_required_fields")})}async function G(t){if(f.value&&(f.value.displayWrongValues=!_.value),!!_.value){a.password=t.password.trim(),a.email=t.email.trim(),a.name=t.name.trim();try{d.value=!0,await p.signUpWithEmailAndPassword(a),p.setConfirmationEmail(t.email),p.setAutoRedirectTemp(a.password),K().push({path:A.VALIDATE_EMAIL})}catch(o){o&&(r.email={validateStatus:"error",help:X.global.t("LOGIN.invalid_email")},b(String(o)))}d.value=!1}}ue(S,async()=>{try{const t=await p.signUpWithGoogle(S.value);await te().getLoggerUser(),ce(t)}catch{}ae().resetInviteData()});function V(){Y(A.LOGIN)}return(t,o)=>{const O=oe,v=x("a-input"),g=x("a-form-item"),q=ne,D=x("a-form"),W=le,z=ie,M=re;return w(),h("div",fe,[n("div",ve,[n("div",ge,[n("div",ye,[he,n("h2",xe,u(t.$t("LOGIN.create_mitra_account")),1),n("span",we,u(t.$t("LOGIN.welcome_fill_information")),1)]),s(D,{model:e(a),name:"signup_form",class:"auth-form pt-6","hide-required-mark":"",layout:"vertical",onFinish:G},{default:i(()=>[s(g,$({"data-cy":"field-name",name:"name",label:t.$t("GLOBAL.name")},e(r).name),{default:i(()=>[s(v,{value:e(a).name,"onUpdate:value":o[0]||(o[0]=l=>e(a).name=l),"data-cy":"input-name",placeholder:t.$t("LOGIN.enter_name"),class:"py-2.5"},{suffix:i(()=>[e(r).name.validateStatus==="error"?(w(),h("div",Ie,[s(O,{size:"18px",color:"#F04438",type:"mdi",path:e(k)},null,8,["path"])])):C("",!0)]),_:1},8,["value","placeholder"])]),_:1},16,["label"]),s(g,$({"data-cy":"field-email",name:"email",label:t.$t("GLOBAL.email")},e(r).email),{default:i(()=>[s(v,{value:e(a).email,"onUpdate:value":o[1]||(o[1]=l=>e(a).email=l),"data-cy":"input-email",placeholder:t.$t("LOGIN.insert_email"),class:"py-2.5",onChange:o[2]||(o[2]=l=>U.value=!1)},{suffix:i(()=>[e(r).email.validateStatus==="error"?(w(),h("div",Le,[s(O,{size:"18px",color:"#F04438",type:"mdi",path:e(k)},null,8,["path"])])):C("",!0)]),_:1},8,["value","placeholder"])]),_:1},16,["label"]),s(g,{"data-cy":"field-pawssord",name:"password",label:"Senha"},{default:i(()=>[s(v,{value:e(a).password,"onUpdate:value":o[4]||(o[4]=l=>e(a).password=l),placeholder:t.$t("LOGIN.at_least_6_characters"),"data-cy":"input-password",type:e(L),class:"py-2.5 my-input"},{suffix:i(()=>[s(q,{onChange:o[3]||(o[3]=l=>L.value=l)})]),_:1},8,["value","placeholder","type"])]),_:1})]),_:1},8,["model"]),s(W,{ref_key:"passwordStrengthRef",ref:f,password:e(a).password,rules:e(B),onUpdate:o[5]||(o[5]=l=>_.value=l)},null,8,["password","rules"]),n("div",Se,[s(z,{loading:e(d),text:"Login",color:"var(--violet-600)","fit-to-content":"",class:"login-button link",onClick:P},null,8,["loading"]),s(M,{loading:e(d),"preffix-text":t.$t("LOGIN.google_login"),ready:e(j),class:"mt-4",onClick:e(R)},null,8,["loading","preffix-text","ready","onClick"])]),n("div",{class:"flex justify-center mt-6 mb-8 cursor-pointer",onClick:V},[n("div",Ge,u(t.$t("LOGIN.already_have_account")),1),n("div",Oe,u(t.$t("LOGIN.login")),1)])])])])}}});const He=se(Ne,[["__scopeId","data-v-f72b61ee"]]);export{He as default};
