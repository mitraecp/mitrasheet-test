import I from"./MetadataAddButton.41902bb4.js";import k from"./DroppableWrapper.e14af8ec.js";import V from"./ViewDimensionSelector.7211b5bd.js";import{_ as N}from"./MetadataButton.vue.350ca6ce.js";import{u as O}from"./dimension_store.1aca34b5.js";import{f as q,r as v,v as $,o as d,b as E,e as f,t as F,u as o,c as _,w as x,l as c,n as M,A as z,J as g,ax as J,ap as L,ar as P,s as w}from"./entry.102678be.js";import{u as R}from"./useChartsSettings.971a22bb.js";const U={class:"label-title"},W={class:"flex flex-col container"},Q=q({__name:"ViewXAxis",props:{tableType:{type:String,default:"dimension"},viewTitle:{type:String,default:"Colunas"}},emits:["trigger-update-view"],setup(S,{emit:l}){const y=S,t=R(),{getDimensionNameById:A}=O(),n=v();function D(i){var a;if(!((a=t.viewForm.axisY)==null?void 0:a.every(s=>s!==i.id))){w("TOAST.unable_add_same_dimension");return}t.setAxisX(i.id),l("trigger-update-view"),n.value=!1}const u=v(!1),b=()=>{u.value=!0};function T(){u.value=!1}function X(){t.removeAxisX(),l("trigger-update-view")}const C=i=>{var s,r;const e=JSON.parse(i.dataTransfer.getData("value")).data;if(!t.verifyIfDataIsUniqueInAxisYAndAxisX((s=e.dimensionId)!=null?s:e.id)){w("TOAST.unable_add_same_dimension");return}if("dimensionId"in e){const m=(r=e.dimensionId)!=null?r:e.id;t.setAxisX(m),l("trigger-update-view")}};return(i,e)=>{const a=I,s=k,r=V,m=$("a-popover"),B=N;return d(),E("div",null,[f("p",U,F(y.viewTitle),1),f("div",W,[o(t).viewForm.axisX?g("",!0):(d(),_(s,M(z({key:0},{onDragOver:b,onDragLeave:T,onDrop:C})),{default:x(()=>[c(a,{hover:o(u),onClick:e[0]||(e[0]=p=>n.value=!0)},null,8,["hover"])]),_:1},16)),c(m,{visible:o(n),"onUpdate:visible":e[2]||(e[2]=p=>J(n)?n.value=p:null),"overlay-class-name":"w-[360px]",placement:"bottomRight",trigger:"click","arrow-point-at-center":""},{content:x(()=>[c(r,{ref:"filterSelector",chip:0,title:i.$t("SHEET.VIEW.add_column"),onCancel:e[1]||(e[1]=p=>n.value=!1),onSubmit:D},null,8,["title"])]),_:1},8,["visible"])]),o(t).viewForm.axisX?(d(),_(B,{key:0,text:o(A)(o(t).viewForm.axisX),icon:o(L),onClose:X,onContextmenu:e[3]||(e[3]=P(()=>{},["prevent","stop"]))},null,8,["text","icon"])):g("",!0)])}}});export{Q as _};
