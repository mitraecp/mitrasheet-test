import{f as M,ae as O,r as f,i as c,au as q,cA as z,cB as U,cC as F,av as H,H as K,aC as x,s as R,v as E,aF as V,o as i,b as l,k as J,M as Q,C as X,e as s,u as d,N as Y,c as Z,ax as ee,at as te,t as k,l as v,w as I,ar as oe,cD as se,m as T,x as ae,y as ne,z as re,a as ie}from"./entry.102678be.js";import{_ as ce}from"./HeaderBar.vue.02da9777.js";import{b as N}from"./useGoToScreen.2d5a4740.js";import{_ as le}from"./simple_grid_purple.8fc55868.js";import{s as pe}from"./simple_grid_grey.66d15878.js";import"./ProjectView.vue.c9650a78.js";import"./legacy_store.afec42ea.js";import"./useLegacyService.c9b3bbf8.js";import"./useHeadSettings.f1985dcc.js";import"./composables.aec528df.js";import"./useURLPaths.92126496.js";/* empty css                         *//* empty css                    *//* empty css                             */import"./MitraButton.1bc6f00c.js";import"./members_store.a95d955a.js";import"./dimension_store.1aca34b5.js";import"./dataset_store.f318df7c.js";import"./metadata_store.49c5a48c.js";/* empty css                                    *//* empty css                           */import"./useChartsSettings.971a22bb.js";import"./MitraIconButton.142ef623.js";/* empty css                         *//* empty css                            *//* empty css                             */import"./regexp.6086e722.js";/* empty css                        *//* empty css                        */const de=""+new URL("open_external_grey.f1d36968.svg",import.meta.url).href,y=a=>(ne("data-v-13f3c926"),a=a(),re(),a),me={class:"overflow-auto shortHeight:max-h-[400px] pr-3"},ue={key:0,class:""},_e=["data-cy"],fe=["onClick"],ke=y(()=>s("div",{class:"icon-wrapper"},[s("img",{src:le})],-1)),ve={key:1,class:"text-grey-900"},ye=y(()=>s("span",{class:"text-grey-400 hidden"},"Criado por Barts, editado h\xE1 2 dias",-1)),he={class:"w-[169px]"},be={key:1,class:"flex justify-center text-center"},we={class:"text-grey-500 text-lg"},Ce=y(()=>s("br",null,null,-1)),Oe=M({__name:"ProjectContent",props:{sheets:{type:Array,required:!1,default:()=>[]},workspaceId:{type:Number,required:!0},project:{type:Object,required:!0},readonlyProject:{type:Boolean,required:!1,default:!1}},setup(a){const o=a,h=O(),p=f(-1),n=f(""),S=f([{label:c().$translate("GLOBAL.open"),icon:pe,typeImg:!0,suffix:de,accessTypes:["CREATOR","BUSINESS","OWNER","NONE"],onClick:({contextIdx:e})=>B(e),onSuffixClick:({contextIdx:e})=>$(e)},{divider:!0,class:"m-0"},{label:c().$translate("GLOBAL.rename"),icon:q,disabled:o.readonlyProject,accessTypes:["CREATOR","OWNER"],onClick:({contextIdx:e})=>g(e)},{label:c().$translate("GLOBAL.duplicate"),icon:z,accessTypes:["CREATOR","OWNER"],disabled:!0},{label:c().$translate("GLOBAL.move"),icon:U,accessTypes:["CREATOR","OWNER"],disabled:!0},{label:c().$translate("GLOBAL.share"),icon:F,accessTypes:["CREATOR","OWNER","BUSINESS"],disabled:!0},{divider:!0,class:"m-0"},{label:c().$translate("GLOBAL.delete"),icon:H,accessTypes:["CREATOR","OWNER"],disabled:o.readonlyProject,onClick:({contextIdx:e})=>j(e)}]),A=K(()=>S.value.filter(e=>{var t;return((t=e.accessTypes)==null?void 0:t.includes(o.project.accessType))||e.divider}));function b(e){O().setActiveSheetRef({workbookId:e.workbookId,sheetIndex:0,name:e.name}),N(e.workbookId)}function B(e){const t=x(o.sheets[e]);b(t)}function g(e){p.value=e,n.value=o.sheets[e].name}function w(){p.value=-1,n.value=""}function L(e){p.value!==-1&&e.stopPropagation()}async function C(e){const t=o.sheets[e];if(!n.value||n.value===t.name){w();return}try{await h.renameWorkbook({workbookId:t.workbookId,name:n.value})}catch{R("TOAST.fail_rename_sheet")}w()}function $(e){const t=o.sheets[e].workbookId;!t||N(t,{newTab:!0})}async function j(e){const t=x(o.sheets[e]);try{await h.deleteWorkbook({workbookId:t.workbookId,baseId:o.project.baseId})}catch{R("TOAST.fail_delete_sheet")}}return(e,t)=>{const u=E("a-input"),W=ae,P=ce,D=E("a-dropdown"),G=V("focus");return i(),l("div",me,[a.sheets.length?(i(),l("div",ue,[(i(!0),l(J,null,Q(a.sheets,(_,r)=>(i(),l("div",{key:`project-content-${r}`,"data-cy":`project-content-${_.workbookId}`,class:X(["card-wrapper",{"!mt-0":r===0,"!mb-0":r===a.sheets.length-1}])},[s("div",{class:"card",onClick:m=>d(p)===-1&&b(_)},[ke,s("div",{class:"flex flex-col",onClick:L},[d(p)===r?Y((i(),Z(u,{key:0,ref_for:!0,ref:"input",value:d(n),"onUpdate:value":t[0]||(t[0]=m=>ee(n)?n.value=m:null),"data-cy":"input-name",class:"mr-4",onBlur:m=>C(r),onKeydown:te(m=>C(r),["enter"])},null,8,["value","onBlur","onKeydown"])),[[G]]):(i(),l("h6",ve,k(_.name),1)),ye]),v(D,{trigger:"click","destroy-popup-on-hide":"","overlay-class-name":"py-2 px-3 mitra-popover-wrapper"},{overlay:I(()=>[s("div",he,[v(P,{options:d(A),"context-idx":r},null,8,["options","context-idx"])])]),default:I(()=>[s("div",{class:"icon-button icon-more",onClick:t[1]||(t[1]=oe(()=>{},["stop"]))},[v(W,{size:"15px",type:"mdi",color:"var(--grey-900)",path:d(se)},null,8,["path"])])]),_:2},1024)],8,fe)],10,_e))),128))])):(i(),l("div",be,[s("span",we,[T(k(e.$t("PROJECT.empty_project_text_1"))+" ",1),Ce,T(" "+k(e.$t("PROJECT.empty_project_text_2")),1)])]))])}}}),Ze=ie(Oe,[["__scopeId","data-v-13f3c926"]]);export{Ze as default};
